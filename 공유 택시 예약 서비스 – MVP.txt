📌 공유 택시 예약 서비스 – MVP 기준 정리본 (검토용)
1. 서비스 전제 (MVP 고정 조건)

서비스 지역: 서울 / 경기 일부

차량: 1~2대 고정 (승합차, 예: 스타리아)

기사: 전속 기사 (운영사 관리)

정원: 차량별 고정

고객은 왕복(가는 편 + 귀가 편)을 한 번에 예약

내부 시스템은 가는 편 Trip / 오는 편 Trip 분리 운영

즉시 확정 ❌
→ 요청(Request) → 제안(Proposal) → 수락 시 확정(Booking)

2. 서비스 핵심 개념

고객은 “정확한 시간”이 아닌 희망 시간을 입력

시스템은 여러 고객 요청을 분석하여

비슷한 지역

비슷한 시간대

유사한 목적지 루트
를 기준으로 묶음 운행(Trip)을 생성

시스템이 가장 효율적인 픽업/하차 시간 및 경로를 제안

고객이 수락해야만 실제 예약 확정

3. 고객 예약 입력 정보 (Request)

고객이 최초 입력하는 정보:

출발지(픽업 장소)

희망 픽업 시간

목적지(가는 편 하차 장소)

희망 귀가 시간

귀가 하차 장소(집)

(선택) 특이사항 (캐리어 등)

※ 이 단계에서는 “확정 시간” 없음

4. 시간/운행 정책 (MVP 기준값)

운행 블록 길이: 1~2시간

픽업 시간 허용 오차: 희망 시간 ±30분

귀가 시간 허용 오차: 희망 시간 ±45분

제안(Proposed) 유효시간: 15분

제안 만료 시 자동 무효 → 재매칭 가능

운행은 피크 타임 중심 (예: 출근/퇴근 시간대)

5. Trip(운행 묶음) 개념

Trip은 특정 시간대에 특정 차량이 수행하는 운행 묶음 단위

하나의 Trip에는 여러 고객이 포함될 수 있음 (정원 제한)

Trip에는 여러 픽업 스톱 / 하차 스톱 존재

Trip은 다음을 포함:

차량 ID

운행 시작/종료 시간 범위

스톱 순서 (픽업/하차)

포함된 고객 리스트

6. 제안(Proposal) 생성 기준 – 핵심 중요

Proposal은 Trip 단위 요약 + 고객별 시간표를 반드시 포함해야 함.

6-1. Trip 요약 정보

운행 시간 범위

경로 요약

현재 인원 / 최대 정원

예상 총 소요 시간

예상 요금

6-2. 고객별 확정 시간표 (MVP 필수)

각 고객마다 다음 정보를 계산해서 제공:

픽업 확정 시간

목적지 하차 예상 시간 (가는 편)

귀가 픽업 확정 시간

집 하차 예상 시간 (오는 편)

※ 이 시간들은 지도 API 기반 ETA 계산 결과

7. 고객별 ETA 계산 기준 (MVP)

Trip의 스톱 순서가 결정되면

지도 API를 통해 구간별 이동시간 조회

누적 이동시간 방식으로 각 스톱 도착시간 계산

해당 스톱에 매핑된 고객에게:

픽업 시간

하차 시간
을 확정 시간으로 전달

※ MVP에서는

제안 생성 시 1회 ETA 계산

운행 시작 직전 1회 갱신 정도면 충분

8. 고객 수락/확정 흐름

고객에게 Proposal 전달

고객이 15분 이내 수락 시:

Booking 확정

미수락 시:

Proposal 만료

다른 Trip으로 재매칭 가능

9. 취소 및 패널티 정책 (MVP)

확정 후 30분 이내: 무료 취소

픽업 6시간 전: 10% 수수료

픽업 2시간 전: 30% 수수료

픽업 30분 전 / 노쇼: 100%

노쇼/특이 케이스는 운영자 수동 확정 가능

10. 기사(드라이버) 운영 방식 – MVP

기사에게는 개별 고객 콜 ❌

Trip(운행 묶음) 단위로만 전달

MVP에서는 기사 수락/거절 개념 없음 (자동 배정)

기사 화면에는 다음 정보 제공:

운행 시간

전체 경로

픽업/하차 스톱 목록

승객 수

특이사항

11. 상태 모델 (MVP)
예약 흐름

RideRequest: REQUESTED → PROPOSED → CONFIRMED → CANCELLED

Proposal: ACTIVE → ACCEPTED → EXPIRED

Booking: CONFIRMED → IN_TRIP → COMPLETED / NO_SHOW

Trip

PLANNED → READY → IN_PROGRESS → COMPLETED

12. 외부 API 필수 요소

주소 검색 (지오코딩)

좌표 ↔ 주소 변환

경로/ETA 계산

실시간 차량 위치 표시

알림 (제안 도착, 만료, 픽업 임박)

13. MVP 성공 판단 지표(KPI)

평균 탑승률

Proposal → 수락 전환율

차량 1대당 일 운행 블록 수

평균 픽업 지연 시간

재예약률